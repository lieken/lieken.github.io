(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{333:function(t,e,n){var content=n(335);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(69).default)("87edde0a",content,!0,{sourceMap:!1})},334:function(t,e,n){"use strict";n(333)},335:function(t,e,n){var o=n(68)(!1);o.push([t.i,".nuxt-link-exact-active{background:#1f8dd6}",""]),t.exports=o},336:function(t,e,n){"use strict";n(334);var o=n(90),component=Object(o.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menu"}},[n("div",{staticClass:"pure-menu"},[n("nuxt-link",{staticClass:"pure-menu-heading",attrs:{to:"/"}},[t._v("Discipline")]),t._v(" "),n("ul",{staticClass:"pure-menu-list"},[n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditProject"}},[t._v("專案基本設定")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditPictures"}},[t._v("上傳教材圖片")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditMaterials"}},[t._v("編輯補充教材")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditTest"}},[t._v("編輯隨堂測驗")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditCmapObject"}},[t._v("概念構圖設定")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditExpertMap"}},[t._v("專家概念構圖")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_PackageData"}},[t._v("發佈學習專案")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_DataViewer"}},[t._v("學習歷程檢示")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/"}},[t._v("登出系統")])],1)])],1)])}),[],!1,null,null,null);e.a=component.exports},337:function(t,e,n){"use strict";var o=n(24),l=n(100).findIndex,r=n(101),c="findIndex",d=!0;c in[]&&Array(1).findIndex((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{findIndex:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),r(c)},346:function(t,e,n){var content=n(364);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(69).default)("2bd0c56a",content,!0,{sourceMap:!1})},363:function(t,e,n){"use strict";n(346)},364:function(t,e,n){var o=n(68)(!1);o.push([t.i,".btnSubmit[data-v-7311414b]{float:right;margin-right:0}.v-note-wrapper[data-v-7311414b]{min-height:2em}#topLink a[data-v-7311414b]{color:grey;text-decoration:none;position:fixed;right:50px;bottom:25px}li[data-v-7311414b]{list-style:none}#quiz-true[data-v-7311414b]{color:green}",""]),t.exports=o},372:function(t,e,n){"use strict";n.r(e);n(56),n(38),n(337),n(179),n(23),n(42);var o={name:"pages_EditTest",components:{PagePuremenu:n(336).a},mounted:function(){this.loadjsongoalData()},data:function(){return{showNewBtn:!1,showEditBtn:!1,showEditQuiz:!1,selectgoalData:[{value:-1,text:"請選擇"}],selected:-1,currentGoal:{index:"",text:"",content:""},toolbars:{bold:!0,header:!0,underline:!0,mark:!0,imagelink:!0,undo:!0,redo:!0,trash:!0,subfield:!0,preview:!0},jsongoalData:[{index:"0",name:"金絲竹",subGoals:[{name:"本體"},{name:"莖"},{name:"葉"},{name:"花"},{name:"籜"}]},{index:"1",name:"大王椰子",subGoals:[{name:"本體"},{name:"莖"},{name:"葉"},{name:"花"},{name:"果實"}]}],radioSelected:"0",jsonquizData:[{index:"0",name:"",selected:!0,question:""},{index:"1",name:"",selected:!1,question:""}],materialList:[{index:"0",goal:"金絲竹",subgoal:"本體",text:"金絲竹",content:"請問金絲竹的屬於開花植物中的哪一類？",quiz:[{index:"0",name:"單子葉植物",selected:!0,question:"1. 單子葉植物"},{index:"1",name:"雙子葉植物",selected:!1,question:"2. 雙子葉植物"}]},{index:"1",goal:"金絲竹",subgoal:"莖",text:"金絲竹>莖",content:"請問根據觀察判斷金絲竹的莖生長的型態為何？",quiz:[{index:"0",name:"叢生",selected:!0,question:"1. 叢生"},{index:"1",name:"散生",selected:!1,question:"2. 散生"}]}]}},methods:{loadjsongoalData:function(){var t=this;setTimeout((function(){for(var e in t.jsongoalData)for(var n in t.materialList)if(t.jsongoalData[e].name==t.materialList[n].goal)t.jsongoalData[e].subGoals.findIndex((function(e){return e.name===t.materialList[n].subgoal}));t.loadselectgoalData()}),300)},loadselectgoalData:function(){var t=this,e=1;setTimeout((function(){for(var n in t.selectgoalData=[{value:-1,text:"請選擇"}],t.jsongoalData)for(e in t.jsongoalData[n].subGoals){var o=t.selectgoalData.length;if("本體"==t.jsongoalData[n].subGoals[e].name)var l=t.jsongoalData[n].name+","+t.jsongoalData[n].subGoals[e].name,r=t.jsongoalData[n].name;else l=t.jsongoalData[n].name+","+t.jsongoalData[n].subGoals[e].name,r=t.jsongoalData[n].name+">"+t.jsongoalData[n].subGoals[e].name;var c={value:l,text:r};t.selectgoalData.splice(o,0,c)}}),300)},onradioClick:function(t){for(var e in this.jsonquizData)this.jsonquizData[e].selected=!1;t==this.radioSelected&&(this.jsonquizData[t].selected=!0)},onaddNewquiz:function(){var t=this.jsonquizData.length,e={index:t,name:"",selected:!1};this.jsonquizData.splice(t,0,e)},onaddNewEditquiz:function(t){var e=this.materialList[t].quiz.length,n={index:e,name:"",selected:!1,question:""};this.materialList[t].quiz.splice(e,0,n)},showNewMaterialForm:function(){this.showNewBtn=!this.showNewBtn,this.radioSelected="0",this.showEditBtn=!1,this.selected=-1,this.currentGoal.content="",this.showEditQuiz=!1,this.currentGoal.index=this.materialList.length,this.jsonquizData=[{index:"0",name:"",selected:!0},{index:"1",name:"",selected:!1}],$("#selectGoal_new").html(""),$("#btnMaterial").css("display","none"),this.loadselectgoalData()},hiddenNewMaterialForm:function(){this.showNewBtn=!this.showNewBtn,this.showEditQuiz=!1,this.currentGoal={text:"",index:"",content:""},$("#btnMaterial").css("display","block")},showEditMaterialBtn:function(){this.showEditBtn=!this.showEditBtn},onaddMaterial:function(t,e,n,o){var l,r,c;if(""!=o&&-1!=t){var d;l=(d=n.split(">"))[0],d[1]?c=l+">"+(r=d[1]):(r="本體",c=l),l=(d=t.split(","))[0],"本體"==d[1]?(r="本體",c=l):c=l+">"+(r=d[1]);var m=1;for(var v in this.jsonquizData){if(!this.jsonquizData[v].name)return;this.jsonquizData[v].question=m+". "+this.jsonquizData[v].name,m+=1}var f=e,h={index:e,goal:l,subgoal:r,text:c,content:o,quiz:this.jsonquizData};this.materialList.splice(f,0,h),this.loadjsongoalData(),this.hiddenNewMaterialForm()}},ondeleteMaterial:function(text,t,e,n){if(confirm("注意: 確定刪除 ".concat(text," ?"))){this.showEditQuiz=!1;var o=this.materialList.findIndex((function(e){return e.index===t}));o>=0&&this.materialList.splice(o,1)}this.loadjsongoalData()},oneditMaterial:function(t,e,n){this.selectgoalData[0]={value:-1,text:t},this.selected=-1,this.currentGoal={content:e,text:t,index:n},this.showEditQuiz=!0,this.radioSelected=n,this.$bvModal.show("edit-goal")},onSubmitEditGoal:function(t,e,n,o){var l,r,c,d;(l=(d=n.split(">"))[0],d[1]?c=l+">"+(r=d[1]):(r="本體",c=l),"-1"!=t)&&(l=(d=t.split(","))[0],"本體"==d[1]?(r="本體",c=l):c=l+">"+(r=d[1]));var m=1;for(var v in this.materialList[e].quiz){if(!this.materialList[e].quiz)return;this.materialList[e].quiz[v].question=m+". "+this.materialList[e].quiz[v].name,m+=1}this.materialList[e]={index:e,goal:l,subgoal:r,text:c,content:o,quiz:this.materialList[e].quiz},this.loadjsongoalData()}}},l=(n(363),n(90)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"layout"}},[n("PagePuremenu"),t._v(" "),n("div",{attrs:{id:"main"}},[t._m(0),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticStyle:{display:"block"},attrs:{id:"btnMaterial"}},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.showEditMaterialBtn()}}},[n("b-icon",{attrs:{icon:"gear-fill",scale:"0.8"}}),t._v("\n            編輯隨堂測驗")],1),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.showNewMaterialForm()}}},[n("b-icon",{attrs:{icon:"plus",scale:"1.5"}}),t._v("\n            新增隨堂測驗")],1)],1),t._v(" "),n("div",{staticStyle:{display:"none"},attrs:{id:"btnGoalList"}},[n("h2",{staticClass:"content-subhead"},[t._v("隨堂測驗")]),t._v(" "),n("b-button-group",t._l(t.jsongoalData,(function(e){return n("b-button",{key:e.index,attrs:{pill:""}},[t._v("\n            "+t._s(e.name)+"\n            ")])})),1)],1),t._v(" "),t.showNewBtn?n("form",{attrs:{name:"addMaterialForm",id:"addMaterialForm",onsubmit:"return false"}},[n("fieldset",[n("h2",{staticClass:"content-subhead"},[t._v("新增隨堂試題")]),t._v(" "),n("label",{attrs:{for:"selectGoal_new"}},[t._v("選擇目標")]),t._v(" "),n("b-form-select",{staticClass:"form-select-lg mb-3",attrs:{"aria-label":".form-select-lg",name:"selectGoal_new"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selectgoalData,(function(select){return n("option",{key:select.value,domProps:{value:select.value}},[t._v("\n                "+t._s(select.text)+"\n              ")])})),0),t._v(" "),n("label",{attrs:{for:"materialContent_new"}},[t._v("題目內容")]),t._v(" "),n("mavon-editor",{ref:"md",attrs:{placeholder:"請在此輸入您的隨堂測驗內容...",language:"zh-TW",boxShadow:!1,toolbars:t.toolbars,subfield:!1,scrollStyle:!0},model:{value:t.currentGoal.content,callback:function(e){t.$set(t.currentGoal,"content",e)},expression:"currentGoal.content"}}),t._v(" "),n("label",{attrs:{for:"materialContent_new"}},[t._v("題目選項")]),t._v(" "),n("b-row",{staticClass:"my-1"},[n("b-col",{attrs:{sm:"10"}},t._l(t.jsonquizData,(function(e){return n("b-form-input",{key:e.index,attrs:{size:"sm",placeholder:"請輸入題目"},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"quiz.name"}})})),1),t._v(" "),n("b-col",{attrs:{sm:"2"}},t._l(t.jsonquizData,(function(e){return n("b-form-radio",{key:e.index,attrs:{options:e,size:"lg",value:e.index},on:{change:function(n){return t.onradioClick(e.index)}},model:{value:t.radioSelected,callback:function(e){t.radioSelected=e},expression:"radioSelected"}})})),1)],1),t._v(" "),n("b-button",{staticStyle:{float:"left"},attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.onaddNewquiz()}}},[t._v("新增題目")]),n("br"),t._v(" "),n("b-button-group",{staticStyle:{float:"right"},attrs:{size:"lg"}},[n("b-button",{attrs:{variant:"outline-primary",type:"button"},on:{click:function(e){return t.hiddenNewMaterialForm()}}},[t._v("取消新增")]),t._v(" "),n("b-button",{attrs:{variant:"primary",type:"button"},on:{click:function(e){return t.onaddMaterial(t.selected,t.currentGoal.index,t.currentGoal.text,t.currentGoal.content)}}},[t._v("新增隨堂測驗")])],1)],1)]):t._e()]),t._v(" "),t._l(t.materialList,(function(e){return n("div",{key:e.index,staticClass:"content material"},[n("form",{staticClass:"pure-form pure-form-stacked",attrs:{id:"GoalList-"+e.index,onsubmit:"return false"}},[n("h2",{staticClass:"content-subhead"},[t.showEditBtn?n("b-button",{attrs:{pill:"",variant:"danger"},on:{click:function(n){return t.ondeleteMaterial(e.text,e.index,e.goal,e.subgoal)}}},[n("b-icon",{attrs:{icon:"x-circle",scale:"1"}})],1):t._e(),t._v(" \n            "+t._s(e.text)+"\n            "),t.showEditBtn?n("b-button",{staticStyle:{float:"right"},on:{click:function(n){return t.oneditMaterial(e.text,e.content,e.index)}}},[n("b-icon",{attrs:{icon:"gear-fill",scale:"1"}})],1):t._e()],1),t._v(" "),n("mavon-editor",{staticClass:"md",staticStyle:{"z-index":"-100",position:"relative","font-size":"18px",color:"#777"},attrs:{value:e.content,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,boxShadow:!1,previewBackground:"#fff"}}),t._v(" "),n("ul",t._l(e.quiz,(function(e){return n("li",{key:e.index,attrs:{id:"quiz-"+e.selected}},[t._v("\n                "+t._s(e.question)+"\n            ")])})),0)],1)])})),t._v(" "),n("b-modal",{attrs:{id:"edit-goal","ok-title":"確定編輯","cancel-title":"取消編輯",size:"lg",centered:"",title:"編輯 ["+t.currentGoal.text+"]"},on:{ok:function(e){return t.onSubmitEditGoal(t.selected,t.currentGoal.index,t.currentGoal.text,t.currentGoal.content)}}},[n("b-form",[n("b-form-group",{attrs:{label:"選擇目標","label-for":"name"}},[n("b-form-select",{staticClass:"form-select-lg mb-3",attrs:{"aria-label":".form-select-lg",name:"selectGoal_new"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selectgoalData,(function(select){return n("option",{key:select.value,domProps:{value:select.value}},[t._v("\n                "+t._s(select.text)+"\n              ")])})),0)],1),t._v(" "),n("b-form-group",{attrs:{label:"教材內容","label-for":"name"}},[n("mavon-editor",{staticClass:"mavon",staticStyle:{"z-index":"1",border:"1px solid #d9d9d9"},attrs:{language:"zh-TW",placeholder:"請在此輸入您的教材內容...",boxShadow:!1,toolbars:t.toolbars,subfield:!1,scrollStyle:!0},model:{value:t.currentGoal.content,callback:function(e){t.$set(t.currentGoal,"content",e)},expression:"currentGoal.content"}})],1)],1),t._v(" "),t.showEditQuiz?n("b-form-group",{attrs:{label:"題目選項","label-for":"name"}},[n("b-row",{staticClass:"my-1"},[n("b-col",{attrs:{sm:"10"}},t._l(t.materialList[t.currentGoal.index].quiz,(function(q){return n("b-form-input",{key:q.index,attrs:{size:"sm",placeholder:"請輸入題目"},model:{value:q.name,callback:function(e){t.$set(q,"name",e)},expression:"q.name"}},[t._v("\n                "+t._s(q.name)+"\n              ")])})),1),t._v(" "),n("b-col",{attrs:{sm:"2"}},t._l(t.materialList[t.currentGoal.index].quiz,(function(q){return n("b-form-radio",{key:q.index,attrs:{options:q,size:"lg",value:q.index},on:{change:function(e){return t.onradioClick(q.index)}},model:{value:t.radioSelected,callback:function(e){t.radioSelected=e},expression:"radioSelected"}})})),1)],1),t._v(" "),n("b-button",{staticStyle:{float:"left"},attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.onaddNewEditquiz(t.currentGoal.index)}}},[t._v("新增題目")]),n("br")],1):t._e()],1)],2),t._v(" "),t._m(1)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("h1",[t._v("編輯隨堂測驗")]),t._v(" "),n("h2",[t._v("編輯隨堂測驗幫助學習者進行自我檢測")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{float:"right"},attrs:{id:"topLink"}},[n("a",{attrs:{href:"javascript:$(document).scrollTop(0)"}},[t._v("▲TOP")])])}],!1,null,"7311414b",null);e.default=component.exports}}]);