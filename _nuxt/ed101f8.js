(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{333:function(t,e,n){var content=n(335);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(69).default)("87edde0a",content,!0,{sourceMap:!1})},334:function(t,e,n){"use strict";n(333)},335:function(t,e,n){var o=n(68)(!1);o.push([t.i,".nuxt-link-exact-active{background:#1f8dd6}",""]),t.exports=o},336:function(t,e,n){"use strict";n(334);var o=n(90),component=Object(o.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"menu"}},[n("div",{staticClass:"pure-menu"},[n("nuxt-link",{staticClass:"pure-menu-heading",attrs:{to:"/"}},[t._v("Discipline")]),t._v(" "),n("ul",{staticClass:"pure-menu-list"},[n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditProject"}},[t._v("專案基本設定")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditPictures"}},[t._v("上傳教材圖片")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditMaterials"}},[t._v("編輯補充教材")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditTest"}},[t._v("編輯隨堂測驗")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditCmapObject"}},[t._v("概念構圖設定")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_EditExpertMap"}},[t._v("專家概念構圖")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_PackageData"}},[t._v("發佈學習專案")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/pages_DataViewer"}},[t._v("學習歷程檢示")])],1),t._v(" "),n("li",{staticClass:"pure-menu-item menu-item-divided"},[n("nuxt-link",{staticClass:"pure-menu-link",attrs:{to:"/"}},[t._v("登出系統")])],1)])],1)])}),[],!1,null,null,null);e.a=component.exports},337:function(t,e,n){"use strict";var o=n(24),l=n(100).findIndex,r=n(101),c="findIndex",d=!0;c in[]&&Array(1).findIndex((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{findIndex:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),r(c)},344:function(t,e,n){var content=n(357);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(69).default)("4a9eb6c5",content,!0,{sourceMap:!1})},356:function(t,e,n){"use strict";n(344)},357:function(t,e,n){var o=n(68)(!1);o.push([t.i,".btnSubmit[data-v-a52bbea4]{float:right;margin-right:0}.v-note-wrapper[data-v-a52bbea4]{min-height:5em}#topLink a[data-v-a52bbea4]{color:grey;text-decoration:none;position:fixed;right:50px;bottom:25px}",""]),t.exports=o},369:function(t,e,n){"use strict";n.r(e);n(56),n(38),n(337),n(179),n(23),n(42);var o={name:"pages_EditMaterials",components:{PagePuremenu:n(336).a},mounted:function(){this.loadjsongoalData()},data:function(){return{showNewBtn:!1,showEditBtn:!1,selectgoalData:[{value:-1,text:"請選擇"}],selected:-1,currentGoal:{index:"",text:"",content:""},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,imagelink:!0,code:!0,undo:!0,redo:!0,trash:!0,subfield:!0,preview:!0},jsongoalData:[{index:"0",name:"金絲竹",subGoals:[{name:"本體"},{name:"莖"},{name:"葉"},{name:"花"},{name:"籜"}]},{index:"1",name:"大王椰子",subGoals:[{name:"本體"},{name:"莖"},{name:"葉"},{name:"花"},{name:"果實"}]}],materialList:[{index:"0",goal:"金絲竹",subgoal:"本體",text:"金絲竹",content:"科屬別：禾本科(Poaceae) 蓬萊竹屬(Bambusa)<br>學名：Bambusa vulgaris Schrad. ex Wendl. var. striata (Loddiges ex Lindl.)<br> Gamble英名：Greenstript Common Bamboo, Stripe Common Bamboo<br>別名：黃金間碧玉竹、黃金竹原產地：非洲、印度、馬來西亞"},{index:"1",goal:"金絲竹",subgoal:"葉",text:"金絲竹>葉",content:"葉具短柄，披針形，不具葉耳；葉片具葉鞘，鞘先端有毛。"},{index:"2",goal:"金絲竹",subgoal:"花",text:"金絲竹>花",content:"花序頂生，小穗呈圓錐狀。花兩性；雄蕊6枚。"},{index:"3",goal:"金絲竹",subgoal:"籜",text:"金絲竹>籜",content:"表面密佈細毛，並具有淺色縱線條紋。籜舌截形，具齒緣。籜耳高聳，被剛毛。"},{index:"4",goal:"金絲竹",subgoal:"莖",text:"金絲竹>莖",content:"莖節間還有數條粗細不等的深綠色縱條紋"}]}},methods:{loadjsongoalData:function(){var t=this;setTimeout((function(){for(var e in t.jsongoalData)for(var n in t.materialList)if(t.jsongoalData[e].name==t.materialList[n].goal){var o=t.jsongoalData[e].subGoals.findIndex((function(e){return e.name===t.materialList[n].subgoal}));o>=0&&t.jsongoalData[e].subGoals.splice(o,1)}t.loadselectgoalData()}),300)},loadselectgoalData:function(){var t=this,e=1;setTimeout((function(){for(var n in t.selectgoalData=[{value:-1,text:"請選擇"}],t.jsongoalData)for(e in t.jsongoalData[n].subGoals){var o=t.selectgoalData.length;if("本體"==t.jsongoalData[n].subGoals[e].name)var l=t.jsongoalData[n].name+","+t.jsongoalData[n].subGoals[e].name,r=t.jsongoalData[n].name;else l=t.jsongoalData[n].name+","+t.jsongoalData[n].subGoals[e].name,r=t.jsongoalData[n].name+">"+t.jsongoalData[n].subGoals[e].name;var c={value:l,text:r};t.selectgoalData.splice(o,0,c)}}),300)},showNewMaterialForm:function(){this.showNewBtn=!this.showNewBtn,this.showEditBtn=!1,$("#selectGoal_new").html(""),$("#btnMaterial").css("display","none"),this.selected=-1,this.currentGoal.content="",this.currentGoal.index=this.materialList.length},hiddenNewMaterialForm:function(){this.showNewBtn=!this.showNewBtn,this.selected=-1,this.currentGoal={content:"",text:"",index:""},$("#btnMaterial").css("display","block")},showEditMaterialBtn:function(){this.showEditBtn=!this.showEditBtn},onaddMaterial:function(t,e,n,o){var l,r,c;if(""!=o&&-1!=t){var d=n.split(">");l=d[0],d[1]?(r=d[1],c=l+">"+r):(r="本體",c=l);var m=this.jsongoalData.findIndex((function(t){return t.name===l})),v=this.jsongoalData.findIndex((function(t){return t.name===r}));v>=0&&this.jsongoalData[m].subgoal.splice(v,1);d=t.split(",");l=d[0],"本體"==d[1]?(r="本體",c=l):(r=d[1],c=l+">"+r);var f=e,h={index:e,goal:l,subgoal:r,text:c,content:o};this.materialList.splice(f,0,h),this.loadjsongoalData(),this.hiddenNewMaterialForm()}},ondeleteMaterial:function(text,t,e,n){if(confirm("注意: 確定刪除 ".concat(text," ?"))){var o=this.materialList.findIndex((function(e){return e.index===t}));o>=0&&this.materialList.splice(o,1)}var l=this.jsongoalData.findIndex((function(t){return t.name===e})),r=this.jsongoalData[l].subGoals.length,c={name:n};this.jsongoalData[l].subGoals.splice(r,0,c),this.loadjsongoalData()},oneditMaterial:function(t,e,n){this.selectgoalData[0]={value:-1,text:t},this.selected=-1,this.currentGoal={content:e,text:t,index:n},this.$bvModal.show("edit-goal")},onSubmitEditGoal:function(t,e,n,o){var l,r,c;if(-1==t){var d=n.split(">");l=d[0],d[1]?(r=d[1],c=l+">"+r):(r="本體",c=l),this.materialList[e]={index:e,goal:l,subgoal:r,text:c,content:o}}else{d=n.split(">");l=d[0],d[1]?(r=d[1],c=l+">"+r):(r="本體",c=l);var m=this.jsongoalData.findIndex((function(t){return t.name===l})),v=this.jsongoalData[m].subGoals.length,f={name:r};this.jsongoalData[m].subGoals.splice(v,0,f);d=t.split(",");l=d[0],"本體"==d[1]?(r="本體",c=l):(r=d[1],c=l+">"+r),this.materialList[e]={index:e,goal:l,subgoal:r,text:c,content:o}}this.loadjsongoalData()}}},l=(n(356),n(90)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"layout"}},[n("PagePuremenu"),t._v(" "),n("div",{attrs:{id:"main"}},[t._m(0),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticStyle:{display:"block"},attrs:{id:"btnMaterial"}},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.showEditMaterialBtn()}}},[n("b-icon",{attrs:{icon:"gear-fill",scale:"0.8"}}),t._v("\n            編輯補充教材")],1),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.showNewMaterialForm()}}},[n("b-icon",{attrs:{icon:"plus",scale:"1.5"}}),t._v("\n            新增補充教材")],1)],1),t._v(" "),n("div",{staticStyle:{display:"none"},attrs:{id:"btnGoalList"}},[n("h2",{staticClass:"content-subhead"},[t._v("補充教材")]),t._v(" "),n("b-button-group",t._l(t.jsongoalData,(function(e){return n("b-button",{key:e.index,attrs:{pill:""}},[t._v("\n            "+t._s(e.name)+"\n            ")])})),1)],1),t._v(" "),t.showNewBtn?n("form",{attrs:{name:"addMaterialForm",id:"addMaterialForm",onsubmit:"return false"}},[n("fieldset",[n("h2",{staticClass:"content-subhead"},[t._v("新增補充教材")]),t._v(" "),n("label",{attrs:{for:"selectGoal_new"}},[t._v("選擇目標")]),t._v(" "),n("b-form-select",{staticClass:"form-select-lg mb-3",attrs:{"aria-label":".form-select-lg",name:"selectGoal_new"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selectgoalData,(function(select){return n("option",{key:select.value,domProps:{value:select.value}},[t._v("\n                "+t._s(select.text)+"\n              ")])})),0),t._v(" "),n("label",{attrs:{for:"materialContent_new"}},[t._v("教材內容")]),t._v(" "),n("mavon-editor",{ref:"md",attrs:{placeholder:"請在此輸入您的教材內容...",language:"zh-TW",boxShadow:!1,toolbars:t.toolbars,subfield:!1,scrollStyle:!0},model:{value:t.currentGoal.content,callback:function(e){t.$set(t.currentGoal,"content",e)},expression:"currentGoal.content"}}),t._v(" "),n("b-button-group",{staticStyle:{float:"right"},attrs:{size:"lg"}},[n("b-button",{attrs:{variant:"outline-primary",type:"button"},on:{click:function(e){return t.hiddenNewMaterialForm()}}},[t._v("取消新增")]),t._v(" "),n("b-button",{attrs:{variant:"primary",type:"button"},on:{click:function(e){return t.onaddMaterial(t.selected,t.currentGoal.index,t.currentGoal.text,t.currentGoal.content)}}},[t._v("新增教材")])],1)],1)]):t._e()]),t._v(" "),t._l(t.materialList,(function(e){return n("div",{key:e.index,staticClass:"content material"},[n("form",{staticClass:"pure-form pure-form-stacked",attrs:{id:"GoalList-"+e.index,onsubmit:"return false"}},[n("h2",{staticClass:"content-subhead"},[t.showEditBtn?n("b-button",{attrs:{pill:"",variant:"danger"},on:{click:function(n){return t.ondeleteMaterial(e.text,e.index,e.goal,e.subgoal)}}},[n("b-icon",{attrs:{icon:"x-circle",scale:"1"}})],1):t._e(),t._v(" \n            "+t._s(e.text)+"\n            "),t.showEditBtn?n("b-button",{staticStyle:{float:"right"},on:{click:function(n){return t.oneditMaterial(e.text,e.content,e.index)}}},[n("b-icon",{attrs:{icon:"gear-fill",scale:"1"}})],1):t._e()],1),t._v(" "),n("mavon-editor",{staticClass:"md",staticStyle:{"z-index":"-100",position:"relative","font-size":"18px",color:"#777"},attrs:{value:e.content,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,boxShadow:!1,previewBackground:"#fff"}})],1)])})),t._v(" "),n("b-modal",{attrs:{id:"edit-goal","ok-title":"確定編輯","cancel-title":"取消編輯",size:"lg",centered:"",title:"編輯 ["+t.currentGoal.text+"]"},on:{ok:function(e){return t.onSubmitEditGoal(t.selected,t.currentGoal.index,t.currentGoal.text,t.currentGoal.content)}}},[n("b-form",[n("b-form-group",{attrs:{label:"選擇目標","label-for":"name"}},[n("b-form-select",{staticClass:"form-select-lg mb-3",attrs:{"aria-label":".form-select-lg",name:"selectGoal_new"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selectgoalData,(function(select){return n("option",{key:select.value,domProps:{value:select.value}},[t._v("\n                "+t._s(select.text)+"\n              ")])})),0)],1),t._v(" "),n("b-form-group",{attrs:{label:"教材內容","label-for":"name"}},[n("mavon-editor",{staticClass:"mavon",staticStyle:{"z-index":"1",border:"1px solid #d9d9d9"},attrs:{language:"zh-TW",placeholder:"請在此輸入您的教材內容...",boxShadow:!1,toolbars:t.toolbars,subfield:!1,scrollStyle:!0},model:{value:t.currentGoal.content,callback:function(e){t.$set(t.currentGoal,"content",e)},expression:"currentGoal.content"}})],1)],1)],1)],2),t._v(" "),t._m(1)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("h1",[t._v("編輯補充教材")]),t._v(" "),n("h2",[t._v("針對學習者不完整的概念提供補充教材")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{float:"right"},attrs:{id:"topLink"}},[n("a",{attrs:{href:"javascript:$(document).scrollTop(0)"}},[t._v("▲TOP")])])}],!1,null,"a52bbea4",null);e.default=component.exports}}]);